<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>public/js/categoria.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/modifiers.carga una animación y muestra un chat con sus mensajes.html">modifiers.carga una animación y muestra un chat con sus mensajes</a></li>
                                <li><a href="../classes/modifiers.Popper.html">modifiers.Popper</a></li>
                                <li><a href="../classes/modifiers.recoge las noticias con la categoria especificada y hace una animación.html">modifiers.recoge las noticias con la categoria especificada y hace una animación</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: public/js/categoria.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

/**
 *@class recoge las noticias con la categoria especificada y hace una animación 
 *@author Adrián Cárdenas Lara (ACL)
 *update  12/03/2018 
 *

*/




/**
 * @method animation
 * Recoge los divs y hace una animación
*/
function animation(){

    /**
     * Variable que ejecuta la animación
     * @property functionBasedDelay
     * @type anime
    */
    var functionBasedDelay = anime(
     {
      targets: &#x27;.line&#x27;,
      translateX: 900,
      direction: &#x27;alternate&#x27;,
      loop: false,
      delay: function(el, i, l) {
        return i * 500;
      }
    });
}



/**
 * @method categoroy
 * Crea los divs con las noticias que contengan la categoria selecionada
*/
function category(){

    /**
     * Variable que recoge el nombre de la categoria
     * @property categoria
     * @type String
    */
    var categoria = $(&#x27;#category&#x27;).val();

    console.log(categoria);
    
    /**
     *funcion ajax para recoger las noticias según la categoria
     * @property Ajax
     * @type API
    */
    $.ajax({
        type: &#x27;POST&#x27;,
        crossDomain: true,
        url: &#x27;api/ajaxCategorias&#x27;,
        data: {&#x27;categoria&#x27; : categoria },
        cache: false
    })
    .fail(
        /**
         * @method function
         * Devuelve un error si ha ido mal
         */
          function( jqXHR, textStatus, errorThrown ) {
          console.log( textStatus + errorThrown);
      }
    )
    .done(  
            /**
             * @method function
             * Executa la siguiente función si todo funciona
             * @param res {JSON}
             */
            function(res) {
                        /**
                         * @method console.log
                         * @default &quot;consigue categoria&quot;
                        */
                        console.log(&quot;consigue categoria&quot;);

                        // utilizando JQuery creamos los divs 
                        $(&#x27;.row1&#x27;).empty();
                        $(&#x27;.row2&#x27;).empty();

                        /**
                         * [VARIABLE K] contiene una array de las Noticias
                         * @property k {JSON}
                        */
                        for(var k in res) {
                            if(res[k].importante == 0){
                                /**
                                 * crea un div que será el padre 
                                 * @property div1
                                 * @type Object
                                */
                                var div1 = $(&#x27;&lt;div&gt;&#x27;,{&#x27;class&#x27;:&quot;card noticias&quot;,&#x27;style&#x27;: &quot;float:left; width: 10rem;  margin: 5px ; height: 200px&quot;});
                                

                                /**
                                 * crea un elemento dom IMG que tendrá la imagen de la noticia 
                                 * @property img
                                 * @type Object
                                */
                                var img = $(&#x27;&lt;img&gt;&#x27;,{
                                                    &#x27;style&#x27;: &quot;width: 80%; padding-left: 20%;&quot;,
                                                    &#x27;src&#x27;: res[k].imagen,
                                                    &#x27;alt&#x27;: &quot;Imagen no disponible&quot;,
                                                    });
                                
                                /**
                                 * crea otro div 
                                 * @property div2
                                 * @type Object
                                */
                                var div2 = $(&#x27;&lt;div&gt;&#x27;,);

                                /**
                                 * crea un elemento dom H5 que será el titulo de la noticia
                                 * @property h5
                                 * @type Object
                                */
                                var h5 = $(&#x27;&lt;h5&gt;&#x27;,);



                                /**
                                 * crea un elemento dom P que contendrá la descripcion de la noticia
                                 * @property p
                                 * @type Object
                                */
                                var p = $(&#x27;&lt;p&gt;&#x27;,{&#x27;style&#x27;:&#x27;margin-top: -30px&#x27;});


                                h5.text(res[k].titulo);
                                p.text(res[k].desc);

                                div2.append(h5);
                                div2.append(p);

                                div1.append(img);
                                div1.append(div2);

                                
                                var divLine = $(&#x27;&lt;div&gt;&#x27;,{&#x27;class&#x27;:&#x27;line&#x27;,});
                                divLine.append(div1);

                                $(&#x27;.row2&#x27;).append(divLine);

                            }else if(res[k].importante == 1){
                                var div1 = $(&#x27;&lt;div&gt;&#x27;,{&#x27;class&#x27;:&quot;card noticias&quot;, &#x27;style&#x27;:&quot;float:left; width: 10rem; margin: 5px ; height: 200px&quot;});
                                var img = $(&#x27;&lt;img&gt;&#x27;,{
                                                    &#x27;style&#x27;: &quot;width: 80%; padding-left: 20px;&quot;,
                                                    &#x27;src&#x27;: res[k].imagen,
                                                    &#x27;alt&#x27;: &quot;Imagen no disponible&quot;,
                                                    });
                                var div2 = $(&#x27;&lt;div&gt;&#x27;,);
                                var h5 = $(&#x27;&lt;h5&gt;&#x27;,);
                                var p = $(&#x27;&lt;p&gt;&#x27;,{&#x27;style&#x27;:&#x27;margin-top: -30px&#x27;});

                                h5.text(res[k].titulo);
                                p.text(res[k].desc);

                                div2.append(h5);
                                div2.append(p);

                                div1.append(img);
                                div1.append(div2);

                               
                                var divLine = $(&#x27;&lt;div&gt;&#x27;,{&#x27;class&#x27;:&#x27;line&#x27;});
                                divLine.append(div1);

                                $(&#x27;.row1&#x27;).append(divLine);


                            }else{
                                $(&#x27;.row1&#x27;).text(&#x27;No hay noticias IMPORTANTES de esta categoria&#x27;);
                                $(&#x27;.row2&#x27;).text(&#x27;No hay noticias de esta categoria&#x27;);
                            }
                        }
                        
                    }
    );
    

    /**
     * @method setTimeout
     * Determina el tiempo que tarda en ejecutarse la función
     * @type Function
     * @param animation {función} | time {int}
     */
    setTimeout(animation,100);
    //console.log(&#x27;acaba animation&#x27;);
}


    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
